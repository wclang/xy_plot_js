<!-- part 1 of plot template output html file -->
<!doctype html><html>
    <head>
        <title>Test Data</title>
        <link rel=" style.css stylesheet" href="styles.css">
        <script>
        <!--
            var active_point = false;
            var previous_draw_state = false;
            var selected_index = 0
            var point_radius = 4;
            var canvas_xmin = 0;
            var canvas_xmax = 700;
            var canvas_ymin = 0;
            var canvas_ymax = 500;
            var canvas_plot_margin = 50;
            var main_title = "Old Faithful Geyser";
            var plot_label_x = "eruption waiting time (min)";
            var plot_label_y = "eruption duration (min)";
            var npoints = 272;
            var x = [457.5,174.5,400.9,265.1,525.5,185.8,559.4,525.5,140.6,525.5,174.5,514.2,446.2, 95.3,502.8,151.9,265.1,514.2,151.9,457.5,140.6, 95.3,446.2,344.3,400.9,502.8,185.8,423.6,446.2,457.5,389.6,434.9,310.4,468.9,400.9,151.9,106.6,468.9,231.1,582.1,468.9,219.8,514.2,219.8,389.6,502.8,287.7,163.2,491.5,231.1,412.3,582.1,174.5,468.9,174.5,502.8,367.0,287.7,434.9,480.2,231.1,514.2,106.6,491.5,242.5,604.7,446.2,446.2,299.1,389.6,491.5,197.2,457.5,367.0,265.1,423.6,242.5,446.2,423.6,502.8,412.3,491.5,355.7,299.1,389.6,559.4,423.6,468.9,106.6,536.8,242.5,582.1,129.2,446.2,276.4,378.3,514.2,412.3,140.6,491.5,265.1,559.4,117.9,502.8,480.2, 95.3,514.2,151.9,536.8,480.2,412.3,231.1,570.8,457.5,231.1,480.2,129.2,525.5,231.1,548.1,163.2,344.3,434.9,197.2,559.4,480.2, 72.6,491.5,185.8,582.1, 72.6,502.8,197.2,570.8, 84.0,491.5,140.6,536.8,163.2,457.5,480.2,242.5,491.5,434.9,423.6,231.1,468.9,117.9,650.0,163.2,434.9,434.9,299.1,480.2,367.0,355.7,480.2,616.0,163.2,570.8, 72.6,536.8,219.8,446.2,310.4,423.6,276.4,559.4,151.9,616.0,117.9,208.5,434.9,333.0,480.2,480.2,389.6,129.2,525.5,400.9,185.8,434.9,502.8,502.8,140.6,446.2,514.2, 84.0,502.8,185.8,480.2,208.5,423.6,514.2,434.9,480.2,548.1,434.9,140.6,446.2,242.5,491.5,593.4,163.2,446.2, 84.0,434.9,514.2,117.9,502.8,367.0,468.9,117.9,412.3,287.7,423.6,163.2,627.4,185.8,423.6,129.2,491.5,174.5,412.3,446.2,457.5,446.2,446.2,355.7,457.5,355.7,174.5,536.8,129.2,582.1,174.5,174.5,434.9,457.5,287.7,412.3, 95.3,536.8,276.4,525.5,491.5,208.5,491.5,321.7,400.9,174.5,502.8,389.6,389.6,559.4,468.9,367.0,502.8,197.2,457.5,446.2,514.2,219.8,502.8, 50.0,242.5,412.3,480.2, 84.0,582.1, 84.0,400.9];
            var y = [221.4,427.1,251.9,371.9,114.8,303.4, 95.7,221.4,410.0,135.7,423.4,185.2,152.9,432.9, 95.7,385.2,432.9, 84.3,450.0,147.1,427.1,432.9,238.6,282.3,114.8,221.4,408.1,166.2,192.9,126.2,141.4,122.3,248.1,171.9,194.8,402.3,419.5, 80.5,423.4, 86.2,135.7,417.7,110.9,432.9,114.8,253.8,194.8,392.9,103.4,404.3, 84.3, 93.9,423.4, 80.5,434.8, 74.8,208.1,442.3,110.9,139.5,377.7,118.6,432.9, 84.3,425.2,130.0,156.6, 95.7,396.6, 95.7,171.9,408.1,118.6,175.7,406.2, 53.8,402.3,110.9,189.1,221.4,160.5,137.7,164.3,331.9,168.1, 69.1,181.4,116.6,385.2,175.7,381.4,137.7,419.5, 82.3,423.4,141.4, 99.5,204.3,419.5, 72.9,349.1,133.8,392.9,118.6,170.0,419.5, 95.7,429.1, 78.6,211.9, 91.9,370.0, 72.9,128.1,438.6,103.4,368.1,107.1,425.2,128.1,333.8,168.1,147.1,408.1,107.1,202.3,413.8,118.6,373.8,101.4,419.5,156.6,312.9,137.7,423.4,131.9,417.7, 69.1,400.5,206.2,149.1,377.7,114.8, 82.3,137.7,406.2,103.4,402.3, 50.0,427.1, 57.7,175.7,358.6,107.1,225.2,175.7,118.6,166.2,427.1,179.5,381.4,158.6,404.3,194.8,232.9,109.1,362.3, 61.4,411.9,105.2,413.8,394.8,109.1,251.9,156.6,137.7,118.6,356.6,175.7,156.6,417.7,109.1,147.1,202.3,400.5,126.2,166.2,423.4,128.1,383.4, 84.3,423.4, 84.3,164.3,179.6,149.1,232.9,133.9,375.7, 99.5,392.9,135.7,160.5,419.5,107.1,429.1,133.8,192.9,411.9,118.6,360.5, 95.7,419.5,194.8,242.3,149.1,358.6, 84.3,404.3,158.6,419.5,145.2,432.9,120.5,175.7,162.3,166.2,145.2,185.2,112.9,166.2,356.6,154.8,379.5,124.3,417.7,421.4,143.4,181.4,366.2,158.6,364.3, 69.1,301.4,109.1,194.8,394.8,133.8,389.1,135.7,381.4,124.3,225.2,118.6,158.6,196.6,185.2,124.3,404.3,143.4, 88.1,114.8,421.4,147.1,406.2,375.7, 90.0,162.3,387.1,128.1,425.2,122.3];
            var labels = ["1: (79, 3.6)","2: (54, 1.8)","3: (74, 3.3)","4: (62, 2.3)","5: (85, 4.5)","6: (55, 2.9)","7: (88, 4.7)","8: (85, 3.6)","9: (51, 2)","10: (85, 4.4)","11: (54, 1.8)","12: (84, 3.9)","13: (78, 4.2)","14: (47, 1.8)","15: (83, 4.7)","16: (52, 2.2)","17: (62, 1.8)","18: (84, 4.8)","19: (52, 1.6)","20: (79, 4.2)","21: (51, 1.8)","22: (47, 1.8)","23: (78, 3.4)","24: (69, 3.1)","25: (74, 4.5)","26: (83, 3.6)","27: (55, 2)","28: (76, 4.1)","29: (78, 3.8)","30: (79, 4.4)","31: (73, 4.3)","32: (77, 4.5)","33: (66, 3.4)","34: (80, 4)","35: (74, 3.8)","36: (52, 2)","37: (48, 1.9)","38: (80, 4.8)","39: (59, 1.8)","40: (90, 4.8)","41: (80, 4.4)","42: (58, 1.9)","43: (84, 4.6)","44: (58, 1.8)","45: (73, 4.5)","46: (83, 3.3)","47: (64, 3.8)","48: (53, 2.1)","49: (82, 4.6)","50: (59, 2)","51: (75, 4.8)","52: (90, 4.7)","53: (54, 1.8)","54: (80, 4.8)","55: (54, 1.7)","56: (83, 4.9)","57: (71, 3.7)","58: (64, 1.7)","59: (77, 4.6)","60: (81, 4.3)","61: (59, 2.2)","62: (84, 4.5)","63: (48, 1.8)","64: (82, 4.8)","65: (60, 1.8)","66: (92, 4.4)","67: (78, 4.2)","68: (78, 4.7)","69: (65, 2.1)","70: (73, 4.7)","71: (82, 4)","72: (56, 2)","73: (79, 4.5)","74: (71, 4)","75: (62, 2)","76: (76, 5.1)","77: (60, 2)","78: (78, 4.6)","79: (76, 3.9)","80: (83, 3.6)","81: (75, 4.1)","82: (82, 4.3)","83: (70, 4.1)","84: (65, 2.6)","85: (73, 4.1)","86: (88, 4.9)","87: (76, 4)","88: (80, 4.5)","89: (48, 2.2)","90: (86, 4)","91: (60, 2.2)","92: (90, 4.3)","93: (50, 1.9)","94: (78, 4.8)","95: (63, 1.8)","96: (72, 4.3)","97: (84, 4.7)","98: (75, 3.8)","99: (51, 1.9)","100: (82, 4.9)","101: (62, 2.5)","102: (88, 4.4)","103: (49, 2.1)","104: (83, 4.5)","105: (81, 4)","106: (47, 1.9)","107: (84, 4.7)","108: (52, 1.8)","109: (86, 4.8)","110: (81, 3.7)","111: (75, 4.7)","112: (59, 2.3)","113: (89, 4.9)","114: (79, 4.4)","115: (59, 1.7)","116: (81, 4.6)","117: (50, 2.3)","118: (85, 4.6)","119: (59, 1.8)","120: (87, 4.4)","121: (53, 2.6)","122: (69, 4.1)","123: (77, 4.2)","124: (56, 2)","125: (88, 4.6)","126: (81, 3.8)","127: (45, 1.9)","128: (82, 4.5)","129: (55, 2.3)","130: (90, 4.6)","131: (45, 1.9)","132: (83, 4.2)","133: (56, 2.8)","134: (89, 4.3)","135: (46, 1.8)","136: (82, 4.4)","137: (51, 1.9)","138: (86, 4.9)","139: (53, 2)","140: (79, 3.7)","141: (81, 4.2)","142: (60, 2.2)","143: (82, 4.5)","144: (77, 4.8)","145: (76, 4.3)","146: (59, 2)","147: (80, 4.6)","148: (49, 2)","149: (96, 5.1)","150: (53, 1.8)","151: (77, 5)","152: (77, 4)","153: (65, 2.4)","154: (81, 4.6)","155: (71, 3.6)","156: (70, 4)","157: (81, 4.5)","158: (93, 4.1)","159: (53, 1.8)","160: (89, 4)","161: (45, 2.2)","162: (86, 4.2)","163: (58, 2)","164: (78, 3.8)","165: (66, 3.5)","166: (76, 4.6)","167: (63, 2.4)","168: (88, 5)","169: (52, 1.9)","170: (93, 4.6)","171: (49, 1.9)","172: (57, 2.1)","173: (77, 4.6)","174: (68, 3.3)","175: (81, 4.2)","176: (81, 4.3)","177: (73, 4.5)","178: (50, 2.4)","179: (85, 4)","180: (74, 4.2)","181: (55, 1.9)","182: (77, 4.6)","183: (83, 4.2)","184: (83, 3.8)","185: (51, 2)","186: (78, 4.4)","187: (84, 4.1)","188: (46, 1.8)","189: (83, 4.4)","190: (55, 2.2)","191: (81, 4.8)","192: (57, 1.8)","193: (76, 4.8)","194: (84, 4.1)","195: (77, 4)","196: (81, 4.2)","197: (87, 3.5)","198: (77, 4.4)","199: (51, 2.2)","200: (78, 4.7)","201: (60, 2.1)","202: (82, 4.4)","203: (91, 4.1)","204: (53, 1.9)","205: (78, 4.6)","206: (46, 1.8)","207: (77, 4.4)","208: (84, 3.8)","209: (49, 1.9)","210: (83, 4.5)","211: (71, 2.4)","212: (80, 4.7)","213: (49, 1.9)","214: (75, 3.8)","215: (64, 3.4)","216: (76, 4.2)","217: (53, 2.4)","218: (94, 4.8)","219: (55, 2)","220: (76, 4.2)","221: (50, 1.9)","222: (82, 4.3)","223: (54, 1.8)","224: (75, 4.5)","225: (78, 4)","226: (79, 4.1)","227: (78, 4.1)","228: (78, 4.3)","229: (70, 3.9)","230: (79, 4.6)","231: (70, 4.1)","232: (54, 2.4)","233: (86, 4.2)","234: (50, 2.2)","235: (90, 4.4)","236: (54, 1.9)","237: (54, 1.8)","238: (77, 4.3)","239: (79, 4)","240: (64, 2.3)","241: (75, 4.2)","242: (47, 2.4)","243: (86, 4.9)","244: (63, 2.9)","245: (85, 4.6)","246: (82, 3.8)","247: (57, 2.1)","248: (82, 4.4)","249: (67, 2.1)","250: (74, 4.4)","251: (54, 2.2)","252: (83, 4.4)","253: (73, 3.6)","254: (73, 4.5)","255: (88, 4.2)","256: (80, 3.8)","257: (71, 3.9)","258: (83, 4.4)","259: (56, 2)","260: (79, 4.3)","261: (78, 4.8)","262: (84, 4.5)","263: (58, 1.8)","264: (83, 4.2)","265: (43, 2)","266: (60, 2.2)","267: (75, 4.8)","268: (81, 4.1)","269: (46, 2.2)","270: (90, 4.4)","271: (46, 1.8)","272: (74, 4.5)"];
        // part 2 of plot template output html file
        function in_point(x1,y1,r,x,y) {
            return((x1 - x)*(x1 - x) + (y1 - y)*(y1 - y) < point_radius*point_radius)
        }
        
        function init() {
            var canvas = document.getElementById("myCanvas");
            canvas.addEventListener("mousemove", doMouseMove, false);
            var ctx = canvas.getContext("2d");
            draw_stuff();
        }
        
        function draw_point(ctx, x, y, r, color) {
            ctx.beginPath();
            ctx.arc(x, y, point_radius ,2*Math.PI,false);
            ctx.fillStyle = color;
            ctx.fill();
        }
        
        function draw_point_array(ctx, x, y, point_radius, selected_index, active_point, color, active_color) {
            npoints = x.length;
            for (i=0; i<npoints; i++) {
                if (active_point & selected_index == i) 
                    draw_point(ctx, x[i], y[i], point_radius, active_color);
                else 
                    draw_point(ctx, x[i], y[i], point_radius, color);
            }
        }
        
        function clear_rectangle(ctx, x1, y1, x2, y2) {
            ctx.clearRect(x1, y1, x2 - x1, y2 - y1);
            ctx.fillStyle = "white";
            ctx.fillRect(x1, y1, x2 - x1, y2 - y1);;
        }

        
        function draw_rectangle(ctx, x1, y1, x2, y2) {
            ctx.strokeStyle = "black";
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y1);
            ctx.lineTo(x2, y2);
            ctx.lineTo(x1, y2);
            ctx.lineTo(x1, y1);
            ctx.stroke();
        }
        
        // center of text is at (x,y)
        function draw_big_text(ctx, x, y, txt) {
            ctx.font = "24px Arial";
            ctx.textAlign = "center";
            ctx.fillStyle = "black";
            ctx.fillText(txt, x, y);
        }
        
        // center of text is at (x,y)
        function draw_text(ctx, x, y, txt) {
            ctx.font = "20px Arial";
            ctx.textAlign = "center";
            ctx.fillStyle = "black";
            ctx.fillText(txt, x, y);
        }
        
        function draw_text_vertical(ctx, x, y, txt) {    
            ctx.save();
            ctx.translate(x, y);
            ctx.rotate(-Math.PI/2);
            ctx.textAlign = "center";
            ctx.fillText(txt, 0, 0);
            ctx.restore();
        }
        
        // popup label drawn to left or right of point depending on whether close to left
        // or right edge of plot
        function draw_popup_label(ctx, ptx, pty, canvas_xmax, canvas_ymax, label_txt, label_color) {
            var height = 25;
            var voffset = 10;
            var hoffset = 15;
            var vtoffset = 17;
            var hpadding = 5;
            ctx.font = "16px Arial";
            ctx.textAlign = "left";
            var width = ctx.measureText(label_txt).width + 2*hpadding;
            var rectx = ptx + hoffset;
            var recty = pty - voffset;
            if (rectx + width > canvas_xmax) 
                rectx = ptx + hoffset - width - 2*hoffset;
            if (recty - height < 0)
                recty = pty + voffset;
            ctx.fillStyle = label_color;
            ctx.fillRect(rectx, recty, width, height);
            ctx.font = "16px Arial";
            ctx.fillStyle = "black";
            ctx.fillText(label_txt, rectx + hpadding, recty + vtoffset);
        }

        function draw_stuff() {
            var canvas = document.getElementById("myCanvas");
            var ctx = canvas.getContext("2d");
            clear_rectangle(ctx, canvas_xmin, canvas_ymin, canvas_xmax, canvas_ymax);
            draw_rectangle(ctx, canvas_plot_margin - point_radius, canvas_plot_margin - point_radius, 
                            canvas_xmax - canvas_plot_margin + point_radius, 
                            canvas_ymax - canvas_plot_margin + point_radius);
            draw_big_text(ctx, canvas_xmax/2, canvas_plot_margin/2, main_title);
            draw_text(ctx, canvas_xmax/2, canvas_ymax - canvas_plot_margin/2, plot_label_x);
            draw_text_vertical(ctx, canvas_plot_margin/2, canvas_ymax/2, plot_label_y);
            
            draw_point_array(ctx, x, y, point_radius, selected_index, active_point, "#000000", "#FF0000");
                if (active_point) 
                    draw_popup_label(ctx, x[selected_index], y[selected_index], canvas_xmax, canvas_ymax, 
                        labels[selected_index], "#DDDDDD")
        } 
        
        function doMouseMove(event) {
            var canvas = document.getElementById("myCanvas");
            //console.log(event.clientX-canvas.offsetLeft);
            //console.log(event.clientY-canvas.offsetTop);
            mousex = event.clientX - canvas.offsetLeft + window.scrollX;
            mousey = event.clientY - canvas.offsetTop + window.scrollY;
            active_point = false;
            for (i=0; i<npoints; i++) {
                if (in_point(x[i], y[i], point_radius, mousex, mousey)) {
                    active_point = true;
                    selected_index = i;
                }
            }
            
            // do not re-draw everything if mouse does not enter or leave a point
            if (active_point) {
                previous_draw_state = true;
                draw_stuff();
            } else if (previous_draw_state) {
                previous_draw_state = false;
                draw_stuff();
            }
            
        }
        
        -->
        </script>
    </head>
    <body onLoad=init()>
<canvas width=700 height=500 id="myCanvas"></canvas>
        <!-- part 3 of plot template output html file -->
    </body>
</html>
